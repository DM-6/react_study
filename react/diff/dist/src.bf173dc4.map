{"version":3,"sources":["src\\react\\create-element.js","src\\react-dom\\dom.js","src\\react-dom\\render.js","src\\react\\component.js","src\\react\\index.js","src\\react-dom\\index.js","src\\index.js"],"names":["createElement","tag","attrs","children","key","setAttribute","dom","name","value","test","toLowerCase","style","cssText","removeAttribute","renderComponent","render","_render","vnode","undefined","console","log","String","textNode","document","createTextNode","component","createComponent","setComponentProps","base","Object","keys","forEach","child","props","renderer","parentNode","replaceChild","_component","inst","prototype","Component","constructor","container","appendChild","isReactComponent","state","stateChange","assign","Counter","num","onClick","setState","React","ReactDOM","fontSize","fontWeight","getElementById"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,aAAT,CAAuBC,GAAvB,EAA4BC,KAA5B,EAA+C;AAAA,sCAATC,QAAS;AAATA,gBAAS;AAAA;;AAAI;AAC/C;AACAD,YAAQA,SAAS,EAAjB;AACA,WAAM;AACFD,gBADE;AAEFC,oBAFE;AAGFC,0BAHE;AAIFC,aAAKF,MAAME,GAAN,IAAa,IAJhB,CAIyB;AAJzB,KAAN;AAMH;;kBAEcJ;;;;;AMXf;;;;AACA;;;;;;;;;;;;IAEMgD;;;AACF,qBAAYf,KAAZ,EAAkB;AAAA;;AAAA,sHACRA,KADQ;;AAEd,cAAKY,KAAL,GAAa;AACTI,iBAAK;AADI,SAAb;AAFc;AAKjB;;;;iCAEO;AAAA;;AACJ,mBACI;AAAA;AAAA;AACI;AAAA;AAAA;AAAA;AAAa,yBAAKJ,KAAL,CAAWI;AAAxB,iBADJ;AAEI;AAAA;AAAA,sBAAQ,SAAS;AAAA,mCAAM,OAAKC,OAAL,EAAN;AAAA,yBAAjB;AAAA;AAAA;AAFJ,QLbI7C,KKYR,ULZQA;AKkBX,ALlBE,SAASA,YAAT,CAAsBC,GAAtB,EAA2BC,IAA3B,EAAiCC,KAAjC,EAAuC;AAC1C,QAAGD,SAAS,WAAZ,EAAyBA,OAAO,OAAP;AACzB,QAAG,QAAQE,IAAR,CAAaF,IAAb,CAAH,EAAsB;AAClBA,eAAOA,KAAKG,WAAL,EAAP,CKiBK,ALlBa,CACY;AKkB9B,ALjBAJ,YAAIC,IAAJ,IAAYC,SAAS,EAArB;AKkBA,ALjBH,KAHD,MAGO,IAAGD,EKiBD4C,OLjBU,CKiBf,CAAc,KLjBX,EAAoB;AKkBnBF,ALjBJ,YAAG,CAACzC,KAAD,GKiBM,CLjBI,IKiBCqC,GLjBMrC,EKiBX,CAAWyC,ELjBP,CKiBJ,GAAiB,CLjBI,QAA9B,EAAuC;AKgBzB,ALfV3C,aKeJ,GLfQK,KAAJ,CAAUC,OAAV,GAAoBJ,KAApB;AKkBP,ALjBI,SAFD,MAEO,IAAIA,SAAS,QAAOA,KAAP,yCAAOA,KAAP,OAAiB,QAA9B,EAAuC;AAC1C,iBAAI,IAAID,KAAR,IAAgBC,KAAhB,EAAsB;AAClBF,oBAAIK,KAAJ,CAAUJ,KAAV,IAAkB,OAAOC,MAAMD,KAAN,CAAP,KAAuB,QAAvB,GAAkCC,MAAMD,KAAN,IAAc,IAAhD,GAAuDC,MAAMD,KAAN,CAAzE,CADkB,CACuE;AAC5F;AACJ,EKTa6C,gBAAMZ;ALUvB,KARM,MAQA;AKeXa,ALdQ,YAAG9C,OKcFQ,CLdUT,GAAX,EKcR,ALdwB,CKepB;AAAA,ALdQA,gBAAIC,IAAJ,IAAYC,SAAS,EAArB;AKcR,ALbK;AKaL,ALZI,YAAGA,KAAH,EAAS;AKcT,ALbIF,gBAAID,YAAJ,CAAiBE,IAAjB,EAAuBC,KAAvB;AKaJ,ALZC,SAFD,MAEM;AKYN,ALXIF,UKWE,MLXEO,KKWQ,IAAhB,EAAqB,ILXjB,CAAoBN,IKWK,ALXzB,EAA0BC,KAA1B,eKWJ,EAAkD,OAAO,EAAC8C,UAAU,EAAX,EAAeC,YAAY,MAA3B,EAAzD;AAAA,ALVC;AKUD,ALTH,KKOD;AAGI,ALTP,kCKSQ,OAAD;AAHJ,CADJ,EAMIhC,SAASiC,cAAT,CAAwB,MAAxB,CANJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QJgCgB1C,kBAAAA;QAyBAC,SAAAA;;AApFhB;;AACA;;;;;;AAEA;;;;;;AAJA;AAUA,SAASC,OAAT,CAAkBC,KAAlB,EAAwB;AACpB;AACA;AACA;AACA;AACgB;AACA;AAChB,QAAGA,UAAUC,SAAV,IAAuBD,UAAU,IAAjC,IAAyC,OAAOA,KAAP,KAAiB,SAA7D,EAAwEA,QAAQ,EAAR;;AAExE,QAAG,OAAOA,KAAP,KAAiB,QAApB,EAA6B;AACzBE,gBAAQC,GAAR,CAAYH,KAAZ;AACAA,gBAAQI,OAAOJ,KAAP,CAAR;AACH;;AAED,QAAG,OAAOA,KAAP,KAAiB,QAApB,EAA6B;AACzB,YAAIK,WAAWC,SAASC,cAAT,CAAwBP,KAAxB,CAAf;AACA,eAAOK,QAAP;AACH;;AAED;AACA,QAAG,OAAOL,MAAMhB,GAAb,KAAqB,UAAxB,EAAmC;AAC/B;AACA;AACA,YAAMwB,YAAYC,gBAAgBT,MAAMhB,GAAtB,EAA2BgB,MAAMf,KAAjC,CAAlB;AACAyB,0BAAmBF,SAAnB,EAA8BR,MAAMf,KAApC;AACA,eAAOuB,UAAUG,IAAjB,CAL+B,CAKH;AAC/B;;AAED,QAAMtB,MAAMiB,SAASvB,aAAT,CAAuBiB,MAAMhB,GAA7B,CAAZ;AACA,QAAGgB,MAAMf,KAAT,EAAe;AACX2B,eAAOC,IAAP,CAAYb,MAAMf,KAAlB,EAAyB6B,OAAzB,CAAiC,eAAO;AACpC,gBAAMvB,QAAQS,MAAMf,KAAN,CAAYE,GAAZ,CAAd;AACA;AACA,mCAAaE,GAAb,EAAkBF,GAAlB,EAAuBI,KAAvB;AACH,SAJD;AAKH;;AAED,QAAGS,MAAMd,QAAT,EAAkB;AACdc,cAAMd,QAAN,CAAe4B,OAAf,CAAuB;AAAA,mBAAShB,OAAOiB,KAAP,EAAc1B,GAAd,CAAT;AAAA,SAAvB;AACH;;AAED,WAAOA,GAAP;AACH;;AAED,SAASqB,iBAAT,CAA2BF,SAA3B,EAAsCQ,KAAtC,EAA4C;AACxCR,cAAUQ,KAAV,GAAkBA,KAAlB;AACAnB,oBAAgBW,SAAhB;AACH;;AAED;AACO,SAASX,eAAT,CAAyBW,SAAzB,EAAmC;AACtC,QAAIG,aAAJ,CADsC,CACzB;AACb,QAAMM,WAAWT,UAAUV,MAAV,EAAjB,CAFsC,CAEG;AACzCa,WAAOZ,QAAQkB,QAAR,CAAP;AACA,QAAGT,UAAUG,IAAV,IAAkBH,UAAUG,IAAV,CAAeO,UAApC,EAA+C;AAAK;AAChDV,kBAAUG,IAAV,CAAeO,UAAf,CAA0BC,YAA1B,CAAuCR,IAAvC,EAA6CH,UAAUG,IAAvD;AACH;AACDH,cAAUG,IAAV,GAAiBA,IAAjB;AACAA,SAAKS,UAAL,GAAkBZ,SAAlB;AACH;;AAED,SAASC,eAAT,CAAyBD,SAAzB,EAAoCQ,KAApC,EAA0C;AACtC,QAAIK,aAAJ;AACA,QAAGb,UAAUc,SAAV,IAAuBd,UAAUc,SAAV,CAAoBxB,MAA9C,EAAqD;AACjDuB,eAAO,IAAIb,SAAJ,CAAcQ,KAAd,CAAP,CADiD,CAClB;AAClC,KAFD,MAEM;AACFK,eAAO,IAAIE,mBAAJ,CAAcP,KAAd,CAAP,CADE,CAC8B;AAChCK,aAAKG,WAAL,GAAmBhB,SAAnB,CAFE,CAE8B;AAChCa,aAAKvB,MAAL,GAAc,YAAU;AACpB,mBAAO,KAAK0B,WAAL,CAAiBR,KAAjB,CAAP;AACH,SAFD;AAGH;AACD,WAAOK,IAAP;AACH;;AAEM,SAASvB,MAAT,CAAgBE,KAAhB,EAAuByB,SAAvB,EAAiC;AACpC;AACA,WAAOA,UAAUC,WAAV,CAAsB3B,QAAQC,KAAR,CAAtB,CAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxFD;;;;IAEMuB;AACF,yBAAuB;AAAA,YAAXP,KAAW,uEAAH,EAAG;;AAAA;;AAAI;AACvB,aAAKW,gBAAL,GAAwB,IAAxB;AACA,aAAKC,KAAL,GAAa,EAAb;AACA,aAAKZ,KAAL,GAAaA,KAAb;AACH;;;;iCAEQa,aAAY;AACjBjB,mBAAOkB,MAAP,CAAc,KAAKF,KAAnB,EAA0BC,WAA1B,EADiB,CACyB;AAC1C;AACA,yCAAgB,IAAhB;AACH;;;;;;kBAGUN;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBf;;;;AACA;;;;;;kBAEe;AACXxC,0CADW;AAEXwC;AAFW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHf;;kBAEc,EAAK;AACfzB;AADU","file":"src.bf173dc4.map","sourceRoot":"..","sourcesContent":["function createElement(tag, attrs, ...children){   // crreateElement 返回一个虚拟DOM\r\n    // console.log(tag, attrs, children);\r\n    attrs = attrs || {};\r\n    return{\r\n        tag,\r\n        attrs,\r\n        children,\r\n        key: attrs.key || null     // 标注唯一性\r\n    }\r\n}\r\n\r\nexport default createElement;","export function setAttribute(dom, name, value){\r\n    if(name === 'className') name = 'class';\r\n    if(/on\\w+/.test(name)){\r\n        name = name.toLowerCase();    // 小写\r\n        dom[name] = value || '';\r\n    } else if(name === 'style'){\r\n        if(!value || typeof value === 'string'){\r\n            dom.style.cssText = value;\r\n        } else if (value && typeof value === 'object'){\r\n            for(let name in value){\r\n                dom.style[name] = typeof value[name] === 'number' ? value[name] + 'px' : value[name];    // 驼峰式命名 如 fontSize\r\n            }\r\n        }\r\n    } else {\r\n        if(name in dom) {\r\n            dom[name] = value || '';\r\n        }\r\n        if(value){\r\n            dom.setAttribute(name, value);\r\n        } else{\r\n            dom.removeAttribute(name, value);\r\n        }\r\n    }\r\n}","// import createElement from \"../react/create-element\";\r\nimport { setAttribute } from './dom.js';\r\nimport Component from '../react/component.js';\r\n\r\n/**\r\n* 将虚拟DOM 变成真实DOM\r\n* @params vnode 虚拟DOM\r\n* @return 返回DOM\r\n*/\r\n\r\nfunction _render (vnode){\r\n    // console.log(vnode);\r\n    // return document.createTextNode('render');\r\n    // 1、递归 将结点转成dom，子结点递归，出口就是文本结点\r\n    // 2、结点类型 三种： 文本结点 return createTextNode() \r\n                    //  标签结点 createElement attr children设置（递归_render） \r\n                    //  Component render(return jsx)  再调用render()方法\r\n    if(vnode === undefined || vnode === null || typeof vnode === 'boolean') vnode = '';\r\n\r\n    if(typeof vnode === 'number'){\r\n        console.log(vnode);\r\n        vnode = String(vnode);\r\n    }\r\n\r\n    if(typeof vnode === 'string'){\r\n        let textNode = document.createTextNode(vnode);\r\n        return textNode;\r\n    }\r\n\r\n    // <Counter/> 不是正常标签 vnode.tag = function Counter(){}\r\n    if(typeof vnode.tag === 'function'){\r\n        // console.log(vnode);\r\n        // return document.createTextNode('component');\r\n        const component = createComponent(vnode.tag, vnode.attrs);\r\n        setComponentProps (component, vnode.attrs);\r\n        return component.base;      // 向外返回结点\r\n    }\r\n\r\n    const dom = document.createElement(vnode.tag);\r\n    if(vnode.attrs){\r\n        Object.keys(vnode.attrs).forEach(key => {\r\n            const value = vnode.attrs[key];\r\n            // dom.setAttribute(key, value);\r\n            setAttribute(dom, key, value);\r\n        })\r\n    }\r\n\r\n    if(vnode.children){\r\n        vnode.children.forEach(child => render(child, dom));\r\n    }\r\n\r\n    return dom;\r\n}\r\n\r\nfunction setComponentProps(component, props){\r\n    component.props = props;\r\n    renderComponent(component);\r\n}\r\n\r\n// 将component里的jsx转为DOM 它还会在setState时调用\r\nexport function renderComponent(component){\r\n    let base;    // jsx对应的DOM\r\n    const renderer = component.render();     // 调用render方法\r\n    base = _render(renderer);   \r\n    if(component.base && component.base.parentNode){    // 非第一次渲染组件\r\n        component.base.parentNode.replaceChild(base, component.base)\r\n    }\r\n    component.base = base;\r\n    base._component = component;\r\n}\r\n\r\nfunction createComponent(component, props){\r\n    let inst;\r\n    if(component.prototype && component.prototype.render){\r\n        inst = new component(props);   // 代表任何一个组件\r\n    } else{\r\n        inst = new Component(props);    // 没有构建组件时将Component拿出来\r\n        inst.constructor = component;   // 把构造函数指给component\r\n        inst.render = function(){\r\n            return this.constructor(props);\r\n        }\r\n    }\r\n    return inst;\r\n}\r\n\r\nexport function render(vnode, container){\r\n    // console.log(vnode, container);\r\n    return container.appendChild(_render(vnode));\r\n}","import { renderComponent } from \"../react-dom/render\";\r\n\r\nclass Component {\r\n    constructor(props = {}){   // 构造函数\r\n        this.isReactComponent = true;\r\n        this.state = {};\r\n        this.props = props;\r\n    }\r\n\r\n    setState(stateChange){\r\n        Object.assign(this.state, stateChange);   // assign 新状态的更替\r\n        // 更新DOM\r\n        renderComponent(this);\r\n    }\r\n}\r\n\r\nexport default Component;\r\n","import createElement from './create-element.js';\r\nimport Component from './component.js';\r\n\r\nexport default {\r\n    createElement,\r\n    Component\r\n}","import { render } from './render'\r\n\r\nexport default{    // 构建命名空间\r\n    render\r\n}","import React from './react';\r\nimport ReactDOM from './react-dom';\r\n\r\nclass Counter extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            num: 1\r\n        }\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n                <h1>conut: { this.state.num }</h1>\r\n                <button onClick={() => this.onClick()}>add</button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    onClick(){\r\n        // console.log('onclick');\r\n        this.setState({\r\n            num: this.state.num + 1\r\n        })\r\n    }\r\n}\r\n\r\nReactDOM.render(\r\n    <div>\r\n        Hello\r\n        <span className='rt' onClick=\"console.log('zz');\" style={{fontSize: 20, fontWeight: 'bold'}}> World!</span>\r\n        <Counter />\r\n    </div>,\r\n    document.getElementById('root')\r\n)"]}